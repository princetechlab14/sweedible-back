<!DOCTYPE html>
<html lang="en">

<head>
    <%- include("../partial/head", { title: "Order Items List" }) %>
</head>

<body class="bg-gray-100 dark:bg-gray-900 font-sans bg-cover bg-center">
    <!-- Sidebar -->
    <%- include("../partial/sidebar") %>
        <!-- Main Content -->
        <div class="ml-0 md:ml-64 flex flex-col min-h-screen">
            <!-- Header -->
            <%- include("../partial/header") %>
                <!-- Main Content Area -->
                <div class="container mx-auto py-8 mt-5">
                    <div class="flex flex-col shadow-md mb-5 bg-white rounded-lg p-3">
                        <h1 class="text-4xl font-extrabold mb-4 text-gray-900 dark:text-white">
                            Order Items List
                        </h1>
                        <nav class="flex mb-4" aria-label="Breadcrumb">
                            <ol class="inline-flex items-center space-x-1 md:space-x-3">
                                <li class="inline-flex items-center">
                                    <a href="/admin"
                                        class="inline-flex items-center text-sm font-medium text-gray-700 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white">
                                        <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <path
                                                d="M10 3.172L17.071 10.243 16.364 10.95 10 4.586 3.636 10.95 2.929 10.243 10 3.172z">
                                            </path>
                                        </svg>
                                        Home
                                    </a>
                                </li>
                                <li aria-current="page">
                                    <div class="flex items-center">
                                        <svg class="w-6 h-6 text-gray-400" fill="currentColor" viewBox="0 0 20 20"
                                            xmlns="http://www.w3.org/2000/svg">
                                            <path
                                                d="M10 3.172l7.071 7.071-1.414 1.414L10 4.586l-5.657 5.657-1.414-1.414L10 3.172z">
                                            </path>
                                        </svg>
                                        <span
                                            class="ml-1 text-sm font-medium text-gray-500 md:ml-2 dark:text-gray-400">Order
                                            Items
                                            List</span>
                                    </div>
                                </li>
                            </ol>
                        </nav>
                    </div>
                    <div class="container shadow-lg bg-white rounded-lg mx-auto px-4 sm:px-8">
                        <div class="py-8">
                            <div class="overflow-x-auto">
                                <div class="bg-white shadow-md rounded-lg p-6 mb-6">
                                    <h2 class="text-2xl font-bold mb-4 text-gray-800">Order #<%= order.id %>
                                    </h2>

                                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                        <!-- Order Summary -->
                                        <div class="space-y-2">
                                            <h3 class="font-semibold text-lg text-gray-700 border-b pb-2">Order Summary
                                            </h3>
                                            <p><span class="font-medium">Date:</span>
                                                <%= new Date(order.created_at).toLocaleString() %>
                                            </p>
                                            <p><span class="font-medium">Status:</span>
                                                <span class="px-2 py-1 text-xs rounded-full 
                                                    <%= order.status === 'Delivered' ? 'bg-green-100 text-green-800' : 
                                                       order.status === 'Cancelled' ? 'bg-red-100 text-red-800' : 
                                                       'bg-blue-100 text-blue-800' %>">
                                                    <%= order.status %>
                                                </span>
                                            </p>
                                            <p><span class="font-medium">Payment:</span>
                                                <span class="px-2 py-1 text-xs rounded-full 
                                                    <%= order.payment_status === 'Paid' ? 'bg-green-100 text-green-800' : 
                                                       order.payment_status === 'Failed' ? 'bg-red-100 text-red-800' : 
                                                       'bg-yellow-100 text-yellow-800' %>">
                                                    <%= order.payment_status %>
                                                </span>
                                            </p>
                                            <p><span class="font-medium">Total:</span> $<%=
                                                    order.total_amount.toFixed(2) %>
                                            </p>
                                        </div>

                                        <!-- Customer Information -->
                                        <div class="space-y-2">
                                            <h3 class="font-semibold text-lg text-gray-700 border-b pb-2">Customer
                                                Information</h3>
                                            <p><span class="font-medium">Name:</span>
                                                <%= order.name %>
                                            </p>
                                            <p><span class="font-medium">Email:</span>
                                                <%= order.email %>
                                            </p>
                                            <p><span class="font-medium">Phone:</span>
                                                <%= order.phone %>
                                            </p>
                                        </div>

                                        <!-- Shipping Information -->
                                        <div class="space-y-2">
                                            <h3 class="font-semibold text-lg text-gray-700 border-b pb-2">
                                                <%= order.diffrent_address ? 'Shipping Information'
                                                    : 'Billing Information' %>
                                            </h3>
                                            <p><span class="font-medium">Name:</span>
                                                <%= order.diffrent_address ? order.s_name : order.name %>
                                            </p>
                                            <p><span class="font-medium">Address:</span>
                                                <%= order.diffrent_address ? order.s_address : order.address %>
                                            </p>
                                            <p>
                                                <%= order.diffrent_address ? order.s_city : order.city %>,
                                                    <%= order.diffrent_address ? order.s_state : order.state %>,
                                                        <%= order.diffrent_address ? order.s_country : order.country %>
                                            </p>
                                            <p><span class="font-medium">Zip Code:</span>
                                                <%= order.diffrent_address ? order.s_zip_code : order.zip_code %>
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                <table class="min-w-full bg-white border border-gray-200 rounded-lg">
                                    <thead style="background-color: #1f2937">
                                        <tr>
                                            <th
                                                class="px-4 py-3 text-left text-xs font-medium text-gray-100 uppercase tracking-wider">
                                                ID
                                            </th>
                                            <th
                                                class="px-4 py-3 text-left text-xs font-medium text-gray-100 uppercase tracking-wider">
                                                Product Name
                                            </th>
                                            <th
                                                class="px-4 py-3 text-left text-xs font-medium text-gray-100 uppercase tracking-wider">
                                                Packsize Id
                                            </th>
                                            <th
                                                class="px-4 py-3 text-left text-xs font-medium text-gray-100 uppercase tracking-wider">
                                                Quantity
                                            </th>
                                            <th
                                                class="px-4 py-3 text-left text-xs font-medium text-gray-100 uppercase tracking-wider">
                                                Price
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <% orderItems.forEach((item)=> { %>
                                            <tr>
                                                <td class="px-4 py-3 text-sm text-gray-900">
                                                    <%= item.id %>
                                                </td>
                                                <td class="px-4 py-3 text-sm text-gray-900">
                                                    <%= item.products ? item.products.title : 'N/A' %>
                                                </td>
                                                <td class="px-4 py-3 text-sm text-gray-900">
                                                    Size :: <%= item.packSizeDetail ? item.packSizeDetail.size : 0 %>
                                                        <br>
                                                        price :: <%= item.packSizeDetail ? item.packSizeDetail.price : 0
                                                            %>
                                                </td>
                                                <td class="px-4 py-3 text-sm text-gray-900">
                                                    <%= item.quantity %>
                                                </td>
                                                <td class="px-4 py-3 text-sm text-gray-900">
                                                    <%= item.price %>
                                                </td>
                                            </tr>
                                            <% }); %>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
        </div>
        <!-- Footer -->
        <%- include("../partial/footer") %>

</body>

</html>